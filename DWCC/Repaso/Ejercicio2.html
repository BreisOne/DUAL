<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Lista de la compra</title>
    <style>
        input {
            margin: 10px;
        }
        
        li {
            font-size: 23px;
            list-style: none;
        }
    </style>

</head>

<h1>Lista de la compra</h1>
<form name="elFormulario" action="">
    <input type="text" name="entrada" id="entradaNombre" placeholder="Introduce el nombre de un artículo" />
    <input type="number" name="entrada" id="entradaPrecio" placeholder="Introduce el precio del artículo" />
    <input type="button" name="botonAnadir" id="botonAnadir" value="Añadir" />
    <input type="button" name="botonBorrar" id="botonBorrar" value="Borrar" />
</form>
<div class="listaComprados">
    <h1>Lista Comprados</h1>
    <ul id="listaC">
    </ul>
</div>

<div class="listaEliminados">
    <h1>Lista Eliminados</h1>
    <ul id="listaE">
    </ul>
</div>

<script>

    class Item{
        constructor(nombre, precio){
            this.nombre = nombre;
            this.precio = precio;
        }
    }
    
    let word = "";

    const anhadirArticulo = ()=>{
        let nombre = document.getElementById("entradaNombre");
        let precio = document.getElementById("entradaPrecio");
        
        if(nombre.value != "" && word != ""){
            let item = new Item(word, precio.value);
            console.log(item);
            localStorage.setItem(word, JSON.stringify(item));
            nombre.value = "";
            precio.value = "";
            word = "";
        
        }else{
            alert("Debes introducir un nombre para el producto");
        }
        
    }

    const borrarArticulo = () =>{
        let nombre = document.getElementById("entradaNombre");
        let articuloEliminar = JSON.parse(localStorage.getItem(word));
        listarArticulosBorrados(articuloEliminar);
        localStorage.removeItem(nombre.value);
        nombre = "";
        word = "";
    }

    const borrarElementoLista = (event)=>{
        let listC = document.get
        let liEliminar = event.parentNode;
        
    }

    const listarArticulosComprados = (articulo)=>{
        let listArticElim = document.getElementById("listaC");
        let liElement = document.createElement("li");
        let botonBorrarProducto = document.createAttribute("input");
        botonBorrarProducto.nodeType = "button";
        botonBorrarProducto.value = "borrar";
        botonBorrarProducto.addEventListener("click", borrarElementoLista);

        let nombreElement = document.createTextNode(articulo.nombre);

        liElement.appendChild(nombreElement);
        liElement.appendChild(botonBorrarProducto);
        listArticElim.appendChild(liElement);

    }

    const listarArticulosBorrados = (articulo)=>{
        let listArticElim = document.getElementById("listaE");
        let liElement = document.createElement("li");

        let nombreElement = document.createTextNode(articulo.nombre);
        let precioElement = document.createTextNode(articulo.precio);

        liElement.appendChild(nombreElement);
        liElement.appendChild(precioElement);
        listArticElim.appendChild(liElement);

    }

    const cambiarLetrasAsteriscos = (event)=>{
        let letter = event.key;
        console.log(letter);
        
        if((letter.match(/[a-zA-Z]{1}/) && letter != "Backspace") || letter.match(/[0-9]{1}/) ){
            event.preventDefault();
            word += letter;
            document.getElementById("entradaNombre").value += "*"; 
        }else if(letter == "Backspace"){
            event.preventDefault();
            word = word.slice(0, -1);
            document.getElementById("entradaNombre").value = document.getElementById("entradaNombre").value.slice(0, -1);
        } 
    }

    document.getElementById("entradaNombre").addEventListener("keydown", cambiarLetrasAsteriscos);
    document.getElementById("botonAnadir").addEventListener("click", anhadirArticulo);
    document.getElementById("botonBorrar").addEventListener("click",borrarArticulo);

</script>
</html>